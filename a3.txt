1. Represent influence between users as a directional graph of users, save as a list of lines, as described next: 
Represent a user A getting a reply from another user B as a line A_ID,B_ID (A_ID and B_ID are the comma separated IDs of user A and B, though you can also tab-separate A_ID and B_ID if it fits you). You can get the replies from the file "downloaded_tweets_extend_original_nolf2.tsv". Clarification: Q1 asks for a graph in the form of pairs of users in a text file (no image). Sort the file, such that all lines are consecutive for the same user who got replies.

commands:
tail -n+2 downloaded_tweets_extend_original_nolf2_NOBOT.tsv | awk -F'\t' '($6!="") {print $6"\t"$2}' | sort -k1 > replies.tsv

2. Produce clusters (groups of influence) by ranking the users who got replies by their number of replies. Keep only the largest clusters by "cutting" at a threshold of 3; in order words, keep just the graph for users who got 3 or more replies (@banish suggested on Discord there are 110-120 such users, excluding the bots who replied to themselves). Clarification: for Q2 you need to keep the graph subset from Q1 for users who got 3 or more replies. This includes the id's of all the users who got more than three replies and those who replied. The info is already in the Q1 graph, thus you need to keep a subset of the graph.

commands:
cat replies.tsv | cut -f1 | uniq -c | sort -n -t' ' -k1 | awk '($1>=3) {print $2}' > temp
grep -iFf temp replies.tsv > clusters.tsv

3. Plot the sizes of clusters as a histogram to show how many clusters of each size resulted. Clarification: Q3 asks for a histogram in the form of a plot image, using gnuplot or another charting tool. A histogram is a plot like this, where X is the sizes and Y is the number of occurrences (use bins of size 1: show bars for size 3, size 4, size 5, ... on the X axis).

commands:
/etc/gnuplot-5.4.4/src/gnuplot
set terminal svg
set output 'clusters.svg'
binwidth=1
bin(x,width)=width*floor(x/width)
plot '< cut -f1 clusters.tsv | uniq -c' using (bin($1,binwidth)):(1.0) smooth freq with boxes

4. Find the 30 most frequent hashtags in these largest clusters of replies you kept (for the users/tweets that got replied to, not the users/tweets doing the replies). Compare to the 30 most frequent hashtags you found in assignment #2 (overall, question 5). Which hashtags appear in these clusters that did not appear in the frequent hashtags from assignment #2 (you can use sort and diff for this)?

commands:
tail -n+2 downloaded_tweets_extend_original_nolf2_NOBOT.tsv | awk -F'\t' '($6!="") {print $6"\t"$2"\t"$1}' | sort -k1 > temp1
cat temp1 | cut -f1 | uniq -c | sort -n  -t' ' -k1 | awk '($1>=3) {print $2}' > temp2
grep -iFf temp2 temp1 | cut -f3 > temp3
grep -iFf temp3 downloaded_tweets_extend_original_nolf2_NOBOT.tsv | cut -f4 | sort | uniq -c | sort -rnb | head -30 | awk '{print $2}' > t30_hashtags_subset.txt
cat downloaded_tweets_extend_original_nolf2.tsv | cut -f4 | sort | uniq -c | sort -rnb | head -30 | awk '{print $2}' > t30_hashtags.txt
grep -ivFf t30_hashtags.txt t30_hashtags_subset.txt

results:
AlboForPM
"PamAndTommy,unsubscribe"
"DieMaskeBleibtAuf,WirWollenMaskenpflicht"
VITT
ScottyThePathologicalLiar
ScottytheFailure
QandA
MaskUp
LNPCorruptionParty
LauterbachBleibt
GOPTraitorsToDemocracy
BetoForTexas

à¹‚à¸­à¸«à¹Œà¸¡à¸Ÿà¸¥à¸¸à¹‰à¸„à¸Ÿà¸µà¹€à¸§à¸­à¸£à¹Œ2021
Zelensky
WirWollenMaskenpflicht
"VotingRightsAct,USHistory"
VoteFordOut2022
VoteBlueToSaveAmerica


Script started on 2022-10-09 17:43:43-04:00
]0;siddharth@sjsu:~/cs131[siddharth@sjsu cs131]$ tail -n+2 downloaded_tweets_extend_original_nolf2_NOBOT.tsv | awk -F'\t' '($6!="") {print $6"\t"$2}' | sort -k1 > replies.tsv
]0;siddharth@sjsu:~/cs131[siddharth@sjsu cs131]$ cat replies.tsv | cut -f1 | uniq -c | sort -n -t' ' -k1 | awk '($1>=3) {print $2}' > temp
]0;siddharth@sjsu:~/cs131[siddharth@sjsu cs131]$ grep -iFf temp replies.tsv > clusters.tsv
]0;siddharth@sjsu:~/cs131[siddharth@sjsu cs131]$ /etc/gnuplot-5.4.4/src/gnuplot

	G N U P L O T
	Version 5.4 patchlevel 4    last modified 2022-07-10 

	Copyright (C) 1986-1993, 1998, 2004, 2007-2022
	Thomas Williams, Colin Kelley and many others

	gnuplot home:     http://www.gnuplot.info
	faq, bugs, etc:   type "help FAQ"
	immediate help:   type "help"  (plot window: hit 'h')

Terminal type is now 'unknown'
gnuplot> set terminal svg

Terminal type is now 'svg'
Options are 'size 600,480 fixed enhanced font 'Arial,12' butt dashlength 1.0 '
gnuplot> set output 'clusters.svg'
gnuplot> binwidth=1
gnuplot> bin(x,width)=width*floor(x/width)
gnuplot> plot '< cut -f1 clusters.tsv | uniq -c' using (bin($1,binwidth)):(1.0) smooth freq with boxes
gnuplot> quit
]0;siddharth@sjsu:~/cs131[siddharth@sjsu cs131]$ tail -n+2 downloaded_tweets_extend_original_nolf2_NOBOT.tsv | awk -F'\t' '($6!="") {print $6"\t"$2"\t"$1}' | sort -k1 > temp1
]0;siddharth@sjsu:~/cs131[siddharth@sjsu cs131]$ cat temp1 | cut -f1 | uniq -c | sort -n  -t' ' -k1 | awk '($1>=3) {print $2}' > temp2
]0;siddharth@sjsu:~/cs131[siddharth@sjsu cs131]$ grep -iFf temp2 temp1 | cut -f3 > temp3
]0;siddharth@sjsu:~/cs131[siddharth@sjsu cs131]$ grep -iFf temp3 downloaded_tweets_extend_original_nolf2_NOBOT.tsv | cut -f4 | sort | uniq -c | sort -rnb | head -30 | awk '{print $2}' > t30_hashtags_subset.txt
]0;siddharth@sjsu:~/cs131[siddharth@sjsu cs131]$ cat downloaded_tweets_extend_original_nolf2.tsv | cut -f4 | sort | uniq -c | sort -rnb | head -30 | awk '{print $2}' > t30_hashtags.txt
]0;siddharth@sjsu:~/cs131[siddharth@sjsu cs131]$ grep -ivFf t30_hashtags.txt t30_hashtags_subset.txt
AlboForPM
"PamAndTommy,unsubscribe"
"DieMaskeBleibtAuf,WirWollenMaskenpflicht"
VITT
ScottyThePathologicalLiar
ScottytheFailure
QandA
MaskUp
LNPCorruptionParty
LauterbachBleibt
GOPTraitorsToDemocracy
BetoForTexas

à¹‚à¸­à¸«à¹Œà¸¡à¸Ÿà¸¥à¸¸à¹‰à¸„à¸Ÿà¸µà¹€à¸§à¸­à¸£à¹Œ2021
Zelensky
WirWollenMaskenpflicht
"VotingRightsAct,USHistory"
VoteFordOut2022
VoteBlueToSaveAmerica
]0;siddharth@sjsu:~/cs131[siddharth@sjsu cs131]$ exit

Script done on 2022-10-09 17:45:28-04:00
